<div class="container">
  
  <!-- Mensaje de carga -->
  <div *ngIf="loading" class="loading-msg">
    <p>Cargando tu dise침o...</p>
    <mat-spinner diameter="40"></mat-spinner>
  </div>

  <!-- Tarjeta del Dise침o -->
  <div *ngIf="!loading && diseno" class="viewer-card">
    
    <div class="header-info">
      <h1>{{ diseno.nombre }}</h1>
      <span class="badge">{{ diseno.estado }}</span>
    </div>

    <!-- DEBUG: Esto te mostrar치 qu칠 link est치 intentando abrir. Borralo cuando funcione -->
    <p style="font-size: 12px; color: #888; word-break: break-all;">
      <strong>Link del modelo:</strong> {{ diseno.urlModelo3d }}
    </p>

    <!-- EL VISUALIZADOR -->
    <div class="model-wrapper">
      <!-- OJO AQU칈: Usamos [src] con corchetes para que sea din치mico -->
      <model-viewer
        [src]="diseno.urlModelo3d"
        alt="Modelo 3D subido por el usuario"
        ar
        ar-modes="scene-viewer webxr quick-look"
        camera-controls
        auto-rotate
        shadow-intensity="1"
        style="width: 100%; height: 500px; background-color: #f5f5f5;"
      >
        <!-- Bot칩n AR Flotante -->
        <button slot="ar-button" class="ar-button">
          游녦 Ver en mi espacio
        </button>

        <!-- Mensaje si falla la carga del modelo -->
        <div id="error" slot="error-message" class="error-msg">
          No se pudo cargar el modelo 3D.
        </div>

      </model-viewer>
    </div>

    <div class="footer-info">
      <p><strong>Fecha de creaci칩n:</strong> {{ diseno.fechaCreacion | date:'short' }}</p>
      <button mat-button color="primary" routerLink="/muebles">Volver a la lista</button>
    </div>

  </div>

  <!-- Mensaje si no se encuentra -->
  <div *ngIf="!loading && !diseno.idDiseno" class="error-card">
    <h3>Dise침o no encontrado</h3>
    <button mat-button routerLink="/muebles">Volver</button>
  </div>
</div>