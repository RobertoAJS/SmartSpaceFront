<div class="container">
  <div class="header">
    <h1>Galería de Diseños 3D</h1>
    <p>Explora las versiones disponibles de tus muebles</p>
  </div>

  <div *ngIf="mueblesConDisenos.length === 0" class="no-data">
    <p>No hay diseños subidos todavía.</p>
    <button mat-raised-button color="primary" routerLink="/muebles">Ir a subir uno</button>
  </div>

  <mat-accordion multi>
    
    <!-- Un panel por cada Mueble -->
    <mat-expansion-panel *ngFor="let m of mueblesConDisenos">
      
      <!-- Cabecera del panel (Siempre visible) -->
      <mat-expansion-panel-header>
        <mat-panel-title>
          <strong>{{ m.nombre }}</strong>
        </mat-panel-title>
        <mat-panel-description>
          {{ m.categoria }} — {{ m.disenos?.length }} versiones
        </mat-panel-description>
      </mat-expansion-panel-header>

      <!-- Contenido desplegable (Lista de diseños) -->
      <div class="disenos-list">
        <div class="diseno-item" *ngFor="let d of m.disenos">
          <div class="info">
            <span class="version-name">{{ d.nombre }}</span>
            <span class="date">{{ d.fechaCreacion | date:'short' }}</span>
          </div>
          
          <!-- Botón para ir al visor AR -->
          <button mat-stroked-button color="accent" [routerLink]="['/disenos/ver', d.idDiseno]">
            <mat-icon>view_in_ar</mat-icon> Ver 3D
          </button>
        </div>
      </div>

    </mat-expansion-panel>

  </mat-accordion>
</div>